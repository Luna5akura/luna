---
title: Stochasitc Operation - Assignment - Week 1
category: Assignments
---

作业：第2章习题8, 15。
补充习题. 对M/G/1排队系统，定义T_n表示第n个顾客开始服务的时刻，定义q_n，并给出q_n的递推表达式，说明q_n是马氏链。

# 8

## Problem 

考虑第7节例2．4中的最优库存容量问题，我们假定能生产这种产品的厂家有很多，当不能满足需求时，顺客转向其它厂家。设产品的销售价格是 $ r $ 元。试确定此时的最优库存容量，以使厂家的利润达到最大。

### 例 2.4

例 2．4 一个最优库存容量问题

考虑一种比较品贵的产品的生产与库存。假定生产厂只能一个一个的生产，其生产时间服从参数为 $ \mu $ 的指数分布：生产的产品满足顺客需求，若没有顺客，则存放在仓库中，其库存容量为 $ S $（即可存放 $ S $ 个产品）：当库存量达到 $ S $ 时工厂不再生产：设需求的到达服从Poisson过程，其到达率为入：进而，假定单位产品存放仓库中单位时间的费用为 $ h $ 元（包括存贮费、保险费、耗省费等），缺一个货的单位时间损失为 $ p $ 元（如恐物是供应本单位的需求，缺货会影响生产并带来损失）。

问题是确定库存容量 $ S $ ，使单位时间里的期望费用达到最小。

## Solution

库存为从 0 到 $S $ 的生灭过程，有：

$ \rho=\lambda / \mu<1 $

因此有稳态概率：

$ P_{0}=(1-\rho) \rho^{S} /\left(1-\rho^{S+1}\right) $. 

库存期望：

$ E[k]=S-\rho\left[1-(S+1) \rho^{S}+S \rho^{S+1}\right] /\left[(1-\rho)\left(1-\rho^{S+1}\right)\right] $

利润：

$ \pi(S)=r \lambda\left(1-P_{0}\right)-h E[k] $.


解最大值点可得：

$ S=\left\lceil\frac{\ln \left(\frac{h}{r \lambda(1-\rho)^{2}}\right)}{\ln \rho}\right\rceil $

# 15

## Problem

广场的一冰琪淋店有多个竟争对手，这导致顺客不愿意排长队来等待，从而该店的顾客到达依赖于店中的顺客数。经过长期的观察发现，当店中顺客数 $ j<5 $ 时，顺客以每小时 $ 20-5 j $ 位的速率到达：如果店中顺客数超过 5 人，則不会有顾客到达。冰琪淋店能从每位顾客处赠取 3 元的利润，而每名服务员的工资是每小时 10 元。一名服务员每小时能服务 10 位顾客。要使预期的期望利润达到最大，该店应该挀佣多少名服务员？

## Solution 

这是一个生灭过程，稳态概率 $ \pi_{k} $ 通过以下公式计算：

$
\begin{array}{l}
\frac{\pi_{k}}{\pi_{0}}=\prod_{i=0}^{k-1} \frac{\lambda_{i}}{\mu_{i+1}}, \quad k=1,2,3,4 \\
\pi_{0}=\left(1+\sum_{k=1}^{4} \prod_{i=0}^{k-1} \frac{\lambda_{i}}{\mu_{i+1}}\right)^{-1} \\
\pi_{k}=\pi_{0} \cdot \prod_{i=0}^{k-1} \frac{\lambda_{i}}{\mu_{i+1}}, \quad k=1,2,3,4
\end{array}
$

吞吐量（每小时服务顾客数）$ \theta=\sum_{j=0}^{3} \lambda_{j} \pi_{j} $（因为 $ \lambda_{4}=0 $ ）。期望利润（每小时）$ =3 \theta-10 s $ 。

计算不同的 $s$ 可得：

最大利润在 $ s=2 $ 。

# 补充习题

## Problem

对M/G/1排队系统，定义T_n表示第n个顾客开始服务的时刻，定义q_n，并给出q_n的递推表达式，说明q_n是马氏链。

## Solution

$ q_{n} $ ：第 $ n $ 个顾客服务结束眼间，系统中正在排队的顾客数量。

为了推导出 $ q_{n} $ 的递推表达式，我们需要考虑在第 $ n $ 个顾客服务结束到第 $ n+1 $ 个顾客服务结束的这段时间内发生了什么。

设：
- $ S_{n+1} $ 为第 $ n+1 $ 个顾客的服务时间。
- $ A_{n+1} $ 为在第 $ n $ 个顾客服务结束到第 $ n+1 $ 个顾客服务结束（即在第 $ n+1 $ 个顾客服务期间）这段时间内到达系统的顾客数量。


则：

$ q_{n+1} = \max(0, q_n - 1) + A_{n+1} $

---

我们使用如下马尔科夫链的定义：

定义：一个随机过程 $ \left\{X_{t}, t \in T\right\} $ 被称为马尔可夫链，如果它满足马尔可夫性质：在给定现在状态的条件下，未来状态的条件概率分布只依赖于现在状态，而与过去状态无关。

$
P(X_{n+1} = j | X_n = i, X_{n-1} = i_{n-1}, \ldots, X_0 = i_0) = P(X_{n+1} = j | X_n = i)
$

因此相当于证明：

$ P\left(q_{n+1}=j \mid q_{n}=i, q_{n-1}, \ldots, q_{0}\right)=P\left(q_{n+1}=j \mid q_{n}=i\right) $

根据递推表达式，$ q_{n+1} $ 的值仅仅取决于 $ q_{n} $ 和 $ A_{n+1 。} $
- $ q_{n} $ 是前一个状态。
- $ A_{n+1} $ 是在第 $ n+1 $ 个顾客服务期间到达的顾客数量。由于到达过程是泊松过程（无记记性），井且 $ A_{n+1} $ 的分布只依赖于第 $ n+1 $ 个顾客的服务时间 $ S_{n+1} $ ，而 $ S_{n+1} $ 的分布与 $ q_{n} $ 之前的任何历史状态都无关。即，每个顾客的服务时间是独立同分布的。

因此，给定 $ q_{n}=i, q_{n+1} $ 的概率分布完全由 $ i $ 和 $ A_{n+1} $ 的分布决定。而 $ A_{n+1} $ 的分布与 $ q_{n-1}, \ldots, q_{0} $ 均无关。
所以，$ q_{n} $ 满足马尔可夫性质，它是一个马尔可夫链。





